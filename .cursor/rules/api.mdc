---
description: API
alwaysApply: false
---

# ğŸ“š å›¾åºŠé¡¹ç›® API æ–‡æ¡£

æœ¬ API æ–‡æ¡£åˆ†ä¸ºä¸¤ä¸ªä¸»è¦æœåŠ¡ï¼š**å›¾åºŠåç«¯æœåŠ¡**ï¼ˆè´Ÿè´£æ•°æ®æŒä¹…åŒ–ã€ç®¡ç†ã€ç²¾ç¡®æŸ¥è¯¢ï¼‰å’Œ **MCP æœåŠ¡**ï¼ˆè´Ÿè´£å¤–éƒ¨å·¥å…·/LLM çš„æ•°æ®æ£€ç´¢ä»£ç†ï¼‰ã€‚

## I. å›¾åºŠåç«¯æœåŠ¡ (Image Hosting Backend)

### A. å›¾ç‰‡ç®¡ç† (Image Management)

#### 1\. ä¸Šä¼ å›¾ç‰‡

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `POST` | `/images/upload` | ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼Œå¯é€‰æ·»åŠ æè¿°ï¼Œè¿”å›å›¾ç‰‡ URLã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `file` | Body (FormData) | File | è¦ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ã€‚ | æ˜¯ |
| `description` | Body (FormData) | String | å›¾ç‰‡æè¿°ä¿¡æ¯ã€‚ | å¦ |

**æˆåŠŸå“åº” (201 Created):**

```json
{
  "code": 201,
  "message": "Upload successful",
  "data": {
    "image_id": "img_a1b2c3d4",
    "url": "https://cdn.your-imagehost.com/a1b2c3d4.jpg",
    "hash": "e6884675b87...",
    "description": "ç¾ä¸½çš„é£æ™¯ç…§ç‰‡"
  }
}
```

#### 2\. åˆ é™¤å›¾ç‰‡

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `DELETE` | `/images/{image_id}` | æ ¹æ® ID åˆ é™¤å›¾ç‰‡ï¼ˆå»ºè®®è½¯åˆ é™¤ï¼‰ã€‚ |

#### 3\. è·å–å›¾ç‰‡è¯¦æƒ…

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/images/{image_id}` | è·å–å›¾ç‰‡çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ URLã€æè¿°ã€æ ‡ç­¾ç­‰å…ƒæ•°æ®ã€‚ |

**æˆåŠŸå“åº” (200 OK):**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "image_id": "img_a1b2c3d4",
    "url": "https://cdn.your-imagehost.com/a1b2c3d4.jpg",
    "hash": "e6884675b87...",
    "description": "ç¾ä¸½çš„é£æ™¯ç…§ç‰‡",
    "upload_date": "2025-10-26T12:00:00Z",
    "tags": ["é£æ™¯", "è‡ªç„¶"]
  }
}
```

#### 4\. æ›´æ–°å›¾ç‰‡ä¿¡æ¯

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `PUT` | `/images/{image_id}` | æ›´æ–°å›¾ç‰‡çš„æè¿°ä¿¡æ¯ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `description` | Body | String | æ–°çš„å›¾ç‰‡æè¿°ã€‚ | æ˜¯ |

**æˆåŠŸå“åº” (200 OK):**

```json
{
  "code": 200,
  "message": "Description updated successfully"
}
```

### B. æ ‡ç­¾ç®¡ç†ä¸æŸ¥è¯¢ (Tag Management & Query)

#### 5\. ç»™å›¾ç‰‡æ‰“æ ‡ç­¾

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `PUT` | `/images/{image_id}/tags` | æ›´æ–°å›¾ç‰‡çš„æ ‡ç­¾ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Body | String Array | æ–°çš„æ ‡ç­¾åˆ—è¡¨ã€‚ | æ˜¯ |
| `mode` | Body | String | **'set'** (æ›¿æ¢æ‰€æœ‰æ ‡ç­¾) æˆ– **'append'** (è¿½åŠ æ–°æ ‡ç­¾)ã€‚ | å¦ (é»˜è®¤'set') |

#### 6\. åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/tags` | è·å–æ‰€æœ‰å·²ç”¨æ ‡ç­¾åˆ—è¡¨ã€‚ **(åˆ†é¡µå¿…é¡»)** |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `page` | Query | Integer | é¡µç  (ä» 1 å¼€å§‹)ã€‚ | å¦ (é»˜è®¤ 1) |
| `limit` | Query | Integer | æ¯é¡µæ•°é‡ã€‚ | å¦ (é»˜è®¤ 50) |

**æˆåŠŸå“åº”:**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 1250,
    "current_page": 1,
    "tags": [
      {"name": "é£æ™¯", "count": 520}, 
      {"name": "çŒ«å’ª", "count": 480}, 
      {"name": "è‰ºæœ¯", "count": 300}
    ]
  }
}
```

#### 7\. ç²¾ç¡®æœç´¢ï¼ˆAND é€»è¾‘ï¼‰

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/search/exact` | ä¸¥æ ¼ AND æœç´¢ï¼Œåªè¿”å›åŒæ—¶åŒ…å«æ‰€æœ‰æŒ‡å®šæ ‡ç­¾çš„å›¾ç‰‡ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Query | String Array | å¿…é¡»åŒ…å«çš„æ ‡ç­¾åˆ—è¡¨ (e.g., `tags=cat,cute`)ã€‚ | æ˜¯ |
| `page`, `limit` | Query | Integer | åˆ†é¡µå‚æ•°ã€‚ | å¦ |

**æˆåŠŸå“åº”:**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 150,
    "current_page": 1,
    "results": [
      {
        "id": "img_x1y2z3a4",
        "url": "https://cdn.your-imagehost.com/x1y2z3a4.jpg",
        "description": "ç¾ä¸½çš„å±±å·é£æ™¯",
        "tags": ["é£æ™¯", "è‡ªç„¶", "å±±å·"]
      }
    ]
  }
}
```

#### 8\. ç›¸å…³æ€§æœç´¢ï¼ˆOR é€»è¾‘ï¼‰

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/search/relevance` | OR é€»è¾‘æœç´¢ï¼Œè¿”å›åŒ…å«ä»»ä¸€æ ‡ç­¾çš„å›¾ç‰‡ï¼ŒæŒ‰åŒ¹é…æ ‡ç­¾æ•°é™åºæ’åˆ—ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Query | String Array | æ ‡ç­¾åˆ—è¡¨ (e.g., `tags=cat,cute`)ã€‚ | æ˜¯ |
| `page`, `limit` | Query | Integer | åˆ†é¡µå‚æ•°ã€‚ | å¦ |

**æˆåŠŸå“åº”:**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 520,
    "current_page": 1,
    "results": [
      {
        "id": "img_x1y2z3a4",
        "url": "https://cdn.your-imagehost.com/x1y2z3a4.jpg",
        "description": "å¯çˆ±çš„çŒ«å’ª",
        "matched_tag_count": 3,
        "tags": ["cat", "cute", "pet"]
      },
      {
        "id": "img_b5c6d7e8",
        "url": "https://cdn.your-imagehost.com/b5c6d7e8.jpg",
        "description": "åŠ¨ç‰©ç…§ç‰‡",
        "matched_tag_count": 2,
        "tags": ["cat", "animal"]
      }
    ]
  }
}
```

-----

## II. MCP æœåŠ¡ (Model Context Protocol Service)

**åŸºç¡€ URLï¼š** `https://api.your-imagehost.com/mcp/v1`

**ç”¨é€”ï¼š** ä¾›å¤–éƒ¨ LLM æˆ– AI æ¡†æ¶é€šè¿‡ Tool/Function Calling æœºåˆ¶è°ƒç”¨ï¼Œè¿›è¡Œæ•°æ®æ£€ç´¢ã€‚

### é‰´æƒ (Authentication)

ä½¿ç”¨ **API Key** æˆ– **ç‰¹å®šæœåŠ¡ Token** è¿›è¡Œè®¤è¯ï¼Œç¡®ä¿åªæœ‰æˆæƒçš„ AI æœåŠ¡å¯ä»¥è®¿é—®ã€‚

#### 1\. åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾ (æ ‡ç­¾ä¸Šä¸‹æ–‡è·å–)

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/tags` | ä»£ç†å›¾åºŠåç«¯æ¥å£ (7)ï¼Œä¾› LLM è·å–å¯ç”¨æ ‡ç­¾ä¸Šä¸‹æ–‡ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `page`, `limit` | Query | Integer | åˆ†é¡µå‚æ•°ã€‚ | å¦ |

**æˆåŠŸå“åº”:** (ä¸å›¾åºŠæ¥å£ (7) ç±»ä¼¼ï¼Œä½†ç»“æ„æ›´ç®€æ´ï¼Œä¾¿äº LLM è§£æ)

```json
{
  "tags": ["é£æ™¯", "çŒ«å’ª", "è‰ºæœ¯", "é£Ÿç‰©", "æŠ½è±¡", "..."],
  "total": 1250,
  "has_more": true 
}
```

#### 2\. å¤šæ ‡ç­¾æŸ¥æ‰¾ï¼ˆç›¸å…³æ€§æ’åºï¼‰

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/search/relevance` | ä»£ç†å›¾åºŠåç«¯æ¥å£ (6)ï¼Œè¿”å›æŒ‰åŒ¹é…æ ‡ç­¾æ•°é™åºæ’åˆ—çš„å›¾ç‰‡ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Query | String Array | è¦æœç´¢çš„æ ‡ç­¾åˆ—è¡¨ (OR é€»è¾‘)ã€‚ | æ˜¯ |
| `page`, `limit` | Query | Integer | åˆ†é¡µå‚æ•°ã€‚ | å¦ |

**æˆåŠŸå“åº”:**

```json
{
  "total": 520,
  "results": [
    {
      "image_id": "img_x1y2z3a4",
      "url": "https://cdn.your-imagehost.com/x1y2z3a4.jpg",
      "description": "å¯çˆ±çš„çŒ«å’ª",
      "matched_tag_count": 3,
      "tags": ["cat", "cute", "pet"] 
    },
    {
      "image_id": "img_b5c6d7e8",
      "url": "https://cdn.your-imagehost.com/b5c6d7e8.jpg",
      "description": "åŠ¨ç‰©ç…§ç‰‡",
      "matched_tag_count": 2,
      "tags": ["cat", "animal"] 
    }
  ]
}
```
