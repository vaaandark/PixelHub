---
description: API
alwaysApply: false
---

# ğŸ“š å›¾åºŠé¡¹ç›® API æ–‡æ¡£

æœ¬æ–‡æ¡£æè¿° **å›¾åºŠåç«¯æœåŠ¡** çš„ RESTful APIï¼Œè´Ÿè´£å›¾ç‰‡ä¸Šä¼ ã€å­˜å‚¨ã€æ ‡ç­¾ç®¡ç†ã€æœç´¢ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## å›¾åºŠåç«¯æœåŠ¡ API

### A. å›¾ç‰‡ç®¡ç† (Image Management)

#### 1\. ä¸Šä¼ å›¾ç‰‡

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `POST` | `/images/upload` | ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼Œå¯é€‰æ·»åŠ æè¿°ï¼Œè¿”å›å›¾ç‰‡ URLã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `file` | Body (FormData) | File | è¦ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶ã€‚ | æ˜¯ |
| `description` | Body (FormData) | String | å›¾ç‰‡æè¿°ä¿¡æ¯ã€‚ | å¦ |

**æˆåŠŸå“åº” (201 Created):**

```json
{
  "code": 201,
  "message": "Upload successful",
  "data": {
    "image_id": "img_a1b2c3d4",
    "url": "https://cdn.your-imagehost.com/a1b2c3d4.jpg",
    "hash": "e6884675b87...",
    "description": "ç¾ä¸½çš„é£æ™¯ç…§ç‰‡"
  }
}
```

#### 2\. åˆ—å‡ºæ‰€æœ‰å›¾ç‰‡

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/images` | è·å–æ‰€æœ‰å›¾ç‰‡åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `page` | Query | Integer | é¡µç ï¼ˆä» 1 å¼€å§‹ï¼‰ã€‚ | å¦ (é»˜è®¤ 1) |
| `limit` | Query | Integer | æ¯é¡µæ•°é‡ã€‚ | å¦ (é»˜è®¤ 20) |
| `sort` | Query | String | æ’åºæ–¹å¼ï¼š`date_desc` (æœ€æ–°ä¼˜å…ˆ) æˆ– `date_asc` (æœ€æ—§ä¼˜å…ˆ)ã€‚ | å¦ (é»˜è®¤ date_desc) |

**æˆåŠŸå“åº” (200 OK):**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 150,
    "current_page": 1,
    "images": [
      {
        "id": "img_a1b2c3d4",
        "url": "https://cdn.your-imagehost.com/a1b2c3d4.jpg",
        "description": "ç¾ä¸½çš„é£æ™¯ç…§ç‰‡",
        "upload_date": "2025-10-26T12:00:00Z",
        "tags": ["é£æ™¯", "è‡ªç„¶"]
      }
    ]
  }
}
```

#### 3\. è·å–å›¾ç‰‡è¯¦æƒ…

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/images/{image_id}` | è·å–å•å¼ å›¾ç‰‡çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ URLã€æè¿°ã€æ ‡ç­¾ç­‰å…ƒæ•°æ®ã€‚ |

**æˆåŠŸå“åº” (200 OK):**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "image_id": "img_a1b2c3d4",
    "url": "https://cdn.your-imagehost.com/a1b2c3d4.jpg",
    "hash": "e6884675b87...",
    "description": "ç¾ä¸½çš„é£æ™¯ç…§ç‰‡",
    "upload_date": "2025-10-26T12:00:00Z",
    "tags": ["é£æ™¯", "è‡ªç„¶"]
  }
}
```

#### 4\. æ›´æ–°å›¾ç‰‡æè¿°

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `PUT` | `/images/{image_id}` | æ›´æ–°å›¾ç‰‡çš„æè¿°ä¿¡æ¯ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `description` | Body | String | æ–°çš„å›¾ç‰‡æè¿°ã€‚ | æ˜¯ |

**æˆåŠŸå“åº” (200 OK):**

```json
{
  "code": 200,
  "message": "Description updated successfully"
}
```

#### 5\. åˆ é™¤å›¾ç‰‡

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `DELETE` | `/images/{image_id}` | æ ¹æ® ID åˆ é™¤å›¾ç‰‡ï¼ˆè½¯åˆ é™¤ï¼‰ã€‚ |

**æˆåŠŸå“åº” (200 OK):**

```json
{
  "code": 200,
  "message": "Image deleted successfully"
}
```

### B. æ ‡ç­¾ç®¡ç†ä¸æŸ¥è¯¢ (Tag Management & Query)

#### 6\. ç»™å›¾ç‰‡æ‰“æ ‡ç­¾

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `PUT` | `/images/{image_id}/tags` | æ›´æ–°å›¾ç‰‡çš„æ ‡ç­¾ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Body | String Array | æ–°çš„æ ‡ç­¾åˆ—è¡¨ã€‚ | æ˜¯ |
| `mode` | Body | String | **'set'** (æ›¿æ¢æ‰€æœ‰æ ‡ç­¾) æˆ– **'append'** (è¿½åŠ æ–°æ ‡ç­¾)ã€‚ | å¦ (é»˜è®¤'set') |

#### 7\. åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/tags` | è·å–æ‰€æœ‰å·²ç”¨æ ‡ç­¾åˆ—è¡¨ã€‚ **(åˆ†é¡µå¿…é¡»)** |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `page` | Query | Integer | é¡µç  (ä» 1 å¼€å§‹)ã€‚ | å¦ (é»˜è®¤ 1) |
| `limit` | Query | Integer | æ¯é¡µæ•°é‡ã€‚ | å¦ (é»˜è®¤ 50) |

**æˆåŠŸå“åº”:**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 1250,
    "current_page": 1,
    "tags": [
      {"name": "é£æ™¯", "count": 520}, 
      {"name": "çŒ«å’ª", "count": 480}, 
      {"name": "è‰ºæœ¯", "count": 300}
    ]
  }
}
```

#### 8\. ç²¾ç¡®æœç´¢ï¼ˆAND é€»è¾‘ï¼‰

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/search/exact` | ä¸¥æ ¼ AND æœç´¢ï¼Œåªè¿”å›åŒæ—¶åŒ…å«æ‰€æœ‰æŒ‡å®šæ ‡ç­¾çš„å›¾ç‰‡ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Query | String Array | å¿…é¡»åŒ…å«çš„æ ‡ç­¾åˆ—è¡¨ (e.g., `tags=cat,cute`)ã€‚ | æ˜¯ |
| `page`, `limit` | Query | Integer | åˆ†é¡µå‚æ•°ã€‚ | å¦ |

**æˆåŠŸå“åº”:**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 150,
    "current_page": 1,
    "results": [
      {
        "id": "img_x1y2z3a4",
        "url": "https://cdn.your-imagehost.com/x1y2z3a4.jpg",
        "description": "ç¾ä¸½çš„å±±å·é£æ™¯",
        "tags": ["é£æ™¯", "è‡ªç„¶", "å±±å·"]
      }
    ]
  }
}
```

#### 9\. ç›¸å…³æ€§æœç´¢ï¼ˆOR é€»è¾‘ï¼‰

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| :--- | :--- | :--- |
| `GET` | `/search/relevance` | OR é€»è¾‘æœç´¢ï¼Œè¿”å›åŒ…å«ä»»ä¸€æ ‡ç­¾çš„å›¾ç‰‡ï¼ŒæŒ‰åŒ¹é…æ ‡ç­¾æ•°é™åºæ’åˆ—ã€‚ |

| å‚æ•° | ä½ç½® | ç±»å‹ | æè¿° | å¿…å¡« |
| :--- | :--- | :--- | :--- | :--- |
| `tags` | Query | String Array | æ ‡ç­¾åˆ—è¡¨ (e.g., `tags=cat,cute`)ã€‚ | æ˜¯ |
| `page`, `limit` | Query | Integer | åˆ†é¡µå‚æ•°ã€‚ | å¦ |

**æˆåŠŸå“åº”:**

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "total": 520,
    "current_page": 1,
    "results": [
      {
        "id": "img_x1y2z3a4",
        "url": "https://cdn.your-imagehost.com/x1y2z3a4.jpg",
        "description": "å¯çˆ±çš„çŒ«å’ª",
        "matched_tag_count": 3,
        "tags": ["cat", "cute", "pet"]
      },
      {
        "id": "img_b5c6d7e8",
        "url": "https://cdn.your-imagehost.com/b5c6d7e8.jpg",
        "description": "åŠ¨ç‰©ç…§ç‰‡",
        "matched_tag_count": 2,
        "tags": ["cat", "animal"]
      }
    ]
  }
}
```
